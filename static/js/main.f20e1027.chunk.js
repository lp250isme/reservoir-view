(this["webpackJsonpreservoir-view"]=this["webpackJsonpreservoir-view"]||[]).push([[0],{149:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(69),s=c.n(a),i=(c(78),c(26)),o=c.n(i),l=c(25),j=c(45),d="https://fhy.wra.gov.tw/WraApi",b=("".concat(d,"/v1/Basic/City"),"".concat(d,"/v1/Reservoir/Station?$filter=Importance eq 1")),O="".concat(d,"/v1/Reservoir/RealTimeInfo?$filter="),f=(c(80),c(0)),u=function(){return Object(f.jsx)("div",{className:"header",children:Object(f.jsx)("h1",{children:"\u5168\u53f0\u6c34\u5eab\u8868"})})},h=(c(82),c(83),c.p,c(46)),x=c(13),v=c(31),m=c(70),p=c.n(m),S=c(17),N=c(4);function g(){return(g=Object(j.a)(o.a.mark((function e(t,c){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O+"StationNo%20eq%20'"+c+"'");case 3:return n=e.sent,e.next=6,n.json();case 6:(r=e.sent)[0].PercentageOfStorage=r[0].PercentageOfStorage.toFixed(2),t(r),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}x.b.add(v.c);var y=function(e){var t=e.reservoirItem,c=e.StationNo,r=Object(n.useState)([0]),a=Object(l.a)(r,2),s=a[0],i=a[1];Object(n.useEffect)((function(){!function(e,t){g.apply(this,arguments)}(i,c)}),[]);var o="#3f98c7",j="\u6c34\u91cf\u6b63\u5e38";s[0].PercentageOfStorage<=20&&(o="#ff5e00db",j="\u6c34\u91cf\u4e0d\u8db3");var d=Object(S.a)(o,o)(.5),b=[{key:"0%",stopColor:Object(N.e)(d).darker(.5).toString(),stopOpacity:1,offset:"0%"},{key:"50%",stopColor:d,stopOpacity:.75,offset:"50%"},{key:"100%",stopColor:Object(N.e)(d).brighter(.5).toString(),stopOpacity:.5,offset:"100%"}];return Object(f.jsx)("div",{className:"detail",children:Object(f.jsxs)("table",{className:"table",children:[Object(f.jsx)("thead",{}),Object(f.jsxs)("tbody",{children:[Object(f.jsx)("tr",{children:Object(f.jsx)("td",{colSpan:"2",className:"progressBar",children:Object(f.jsx)(p.a,{style:{margin:"0 auto"},width:150,height:150,value:s[0].PercentageOfStorage,percent:"%",textSize:1,textOffsetX:0,textOffsetY:0,textRenderer:function(e){var t=Math.round(e.value),c=Math.min(e.height/2,e.width/2),n=e.textSize*c/2,r={fontSize:n},a={fontSize:.6*n};return Object(f.jsxs)("tspan",{children:[Object(f.jsx)("tspan",{className:"value",style:r,children:t}),Object(f.jsx)("tspan",{style:a,children:e.percent})]})},riseAnimation:!0,waveAnimation:!0,waveFrequency:2,waveAmplitude:1,gradient:!0,gradientStops:b,circleStyle:{fill:d},waveStyle:{fill:d},textStyle:{fill:Object(N.e)("#444").toString(),fontFamily:"Arial"},waveTextStyle:{fill:Object(N.e)("#fff").toString(),fontFamily:"Arial"}})})}),Object(f.jsx)("tr",{children:Object(f.jsx)("td",{colSpan:"2",style:{backgroundColor:o,color:"white"},className:"topTitle",children:j})}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:"title",children:"\u84c4\u6c34\u767e\u5206\u6bd4"}),Object(f.jsxs)("td",{className:"data",children:[s[0].PercentageOfStorage," %"]})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:"title",children:"\u6c34\u4f4d\u9ad8"}),Object(f.jsxs)("td",{className:"data",children:[s[0].WaterHeight," \u516c\u5c3a"]})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:"title",children:"\u6d41\u57df\u540d\u7a31"}),Object(f.jsx)("td",{className:"data",children:t.BasinName})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:"title",children:"\u66f4\u65b0\u6642\u9593"}),Object(f.jsx)("td",{className:"data",children:s[0].Time})]})]})]})})},w=c(71);x.b.add(v.b,v.a);var k=function(e){var t=e.idx,c=e.StationName,r=e.StationNo,a=e.reservoirItem,s=Object(n.useState)([!1,!1]),i=Object(l.a)(s,2),o=i[0],j=i[1];return Object(f.jsxs)("div",{className:"itemsOutter",children:[Object(f.jsxs)("div",{className:"items",onClick:function(){return o[0]?void j([!1,!1]):(j((function(e){console.log("prev",e)})),void j([!0,!0]))},children:[Object(f.jsxs)("p",{children:[t+1,". ",c]}),Object(f.jsx)("div",{children:o[0]?Object(f.jsx)(h.a,{icon:"minus"}):Object(f.jsx)(h.a,{icon:"plus"})})]}),o[1]?Object(f.jsx)(w.Animated,{animationIn:"zoomIn",animationOut:"zoomOut",isVisible:!0,children:Object(f.jsx)(y,{reservoirItem:a,StationNo:r})}):null]},r)},I=function(e){var t=e.ReservoirList;return Object(f.jsx)("div",{className:"cityList",children:t.map((function(e,t){var c=e.StationNo,n=e.StationName;return Object(f.jsx)(k,{idx:t,StationNo:c,StationName:n,reservoirItem:e},c)}))})};function A(){return(A=Object(j.a)(o.a.mark((function e(t){var c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b);case 2:return c=e.sent,e.next=5,c.json();case 5:n=e.sent,t(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],r=t[1],a=Object(n.useRef)(!1);return Object(n.useEffect)((function(){a.current}),[c]),Object(n.useEffect)((function(){!function(e){A.apply(this,arguments)}(r)}),[]),Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(u,{title:""}),Object(f.jsx)(I,{ReservoirList:c})]})};s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(R,{})}),document.getElementById("root"))},78:function(e,t,c){},80:function(e,t,c){}},[[149,1,2]]]);
//# sourceMappingURL=main.f20e1027.chunk.js.map