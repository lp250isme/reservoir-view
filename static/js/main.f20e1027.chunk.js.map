{"version":3,"sources":["global/contants.js","components/Header.js","image/Water-droplets.png","components/ReservoirDetail.js","components/ReservoirItem.js","components/ReservoirList.js","App.js","index.js"],"names":["API_HOST","API_GET_RESERVOIR_STATION","API_GET_RESERVOIR_REALTIME_INFO","Header","className","setData","StationNo","a","fetch","res","json","data","PercentageOfStorage","toFixed","library","add","faTint","ReservoirDetail","reservoirItem","useState","useEffect","fetchData","color1","waterWarningText","fillColor","interpolateRgb","interpolate","gradientStops","key","stopColor","color","darker","toString","stopOpacity","offset","brighter","colSpan","style","margin","width","radius","height","value","percent","textSize","textOffsetX","textOffsetY","textRenderer","props","Math","round","min","textPixels","valueStyle","fontSize","percentStyle","riseAnimation","waveAnimation","waveFrequency","waveAmplitude","gradient","circleStyle","fill","waveStyle","textStyle","fontFamily","waveTextStyle","backgroundColor","WaterHeight","BasinName","Time","faPlus","faMinus","ReservoirItem","idx","StationName","showResults","setShowResults","onClick","prev","console","log","icon","animationIn","animationOut","isVisible","ReservoirList","map","index","App","clickShowMore","useRef","current","title","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f20e1027.chunk.js","sourcesContent":["export const API_HOST = \"https://fhy.wra.gov.tw/WraApi\";\nexport const API_GET_BASIC_CITY = `${API_HOST}/v1/Basic/City`;\n// export const API_GET_RESERVOIR_STATION = `${API_HOST}/v1/Reservoir/Station`;\nexport const API_GET_RESERVOIR_STATION = `${API_HOST}/v1/Reservoir/Station?$filter=Importance eq 1`;\nexport const API_GET_RESERVOIR_REALTIME_INFO = `${API_HOST}/v1/Reservoir/RealTimeInfo?$filter=`;\n// export const API_GET_RESERVOIR_STATION = `${API_HOST}/v1/Reservoir/RealTimeInfo StationNo `;\n// \"/v1/Reservoir/RealTimeInfo?$filter=StationNo eq 10201\"\n\n// gt, lt, ge, le\n","const Header = () => {\n  return (\n    <div className=\"header\">\n      <h1>全台水庫表</h1>\n    </div>\n  );\n};\n\nexport default Header;\n","export default __webpack_public_path__ + \"static/media/Water-droplets.ae4b2819.png\";","import { React, useState, useEffect, useRef } from \"react\";\nimport { API_GET_RESERVOIR_REALTIME_INFO } from \"../global/contants\";\nimport { CircularProgressbar, CircularProgressbarWithChildren, buildStyles } from \"react-circular-progressbar\";\nimport \"react-circular-progressbar/dist/styles.css\";\nimport water from \"../image/Water-droplets.png\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faTint } from \"@fortawesome/free-solid-svg-icons\";\nimport LiquidFillGauge from \"react-liquid-gauge\";\nimport { interpolateRgb } from \"d3-interpolate\";\nimport { color } from \"d3-color\";\n\nlibrary.add(faTint);\n\nasync function fetchData(setData, StationNo) {\n  try {\n    const res = await fetch(API_GET_RESERVOIR_REALTIME_INFO + \"StationNo%20eq%20'\" + StationNo + \"'\");\n    // const { data } = await res.json();\n    const data = await res.json();\n    data[0].PercentageOfStorage = data[0].PercentageOfStorage.toFixed(2);\n    setData(data);\n  } catch (error) {}\n}\n\nconst ReservoirDetail = ({ reservoirItem, StationNo }) => {\n  const [data, setData] = useState([0]);\n  useEffect(() => {\n    fetchData(setData, StationNo);\n  }, []);\n\n  let color1 = \"#3f98c7\";\n  let waterWarningClass = \"topTitle\";\n  let waterWarningText = \"水量正常\";\n  if (data[0].PercentageOfStorage <= 20) {\n    color1 = \"#ff5e00db\";\n    waterWarningText = \"水量不足\";\n  }\n\n  const radius = 75;\n  const interpolate = interpolateRgb(color1, color1);\n  const fillColor = interpolate(50 / 100);\n  const gradientStops = [\n    {\n      key: \"0%\",\n      stopColor: color(fillColor).darker(0.5).toString(),\n      stopOpacity: 1,\n      offset: \"0%\",\n    },\n    {\n      key: \"50%\",\n      stopColor: fillColor,\n      stopOpacity: 0.75,\n      offset: \"50%\",\n    },\n    {\n      key: \"100%\",\n      stopColor: color(fillColor).brighter(0.5).toString(),\n      stopOpacity: 0.5,\n      offset: \"100%\",\n    },\n  ];\n\n  return (\n    <div className=\"detail\">\n      <table className=\"table\">\n        <thead>\n          {/* <tr>\n            <td className=\"topTitle\" colSpan=\"2\">\n              詳細資料\n            </td>\n          </tr> */}\n        </thead>\n        <tbody>\n          <tr>\n            <td colSpan=\"2\" className=\"progressBar\">\n              <LiquidFillGauge\n                style={{ margin: \"0 auto\" }}\n                width={radius * 2}\n                height={radius * 2}\n                value={data[0].PercentageOfStorage}\n                percent=\"%\"\n                textSize={1}\n                textOffsetX={0}\n                textOffsetY={0}\n                textRenderer={(props) => {\n                  const value = Math.round(props.value);\n                  const radius = Math.min(props.height / 2, props.width / 2);\n                  const textPixels = (props.textSize * radius) / 2;\n                  const valueStyle = {\n                    fontSize: textPixels,\n                  };\n                  const percentStyle = {\n                    fontSize: textPixels * 0.6,\n                  };\n\n                  return (\n                    <tspan>\n                      <tspan className=\"value\" style={valueStyle}>\n                        {value}\n                      </tspan>\n                      <tspan style={percentStyle}>{props.percent}</tspan>\n                    </tspan>\n                  );\n                }}\n                riseAnimation\n                waveAnimation\n                waveFrequency={2}\n                waveAmplitude={1}\n                gradient\n                gradientStops={gradientStops}\n                circleStyle={{\n                  fill: fillColor,\n                }}\n                waveStyle={{\n                  fill: fillColor,\n                }}\n                textStyle={{\n                  fill: color(\"#444\").toString(),\n                  fontFamily: \"Arial\",\n                }}\n                waveTextStyle={{\n                  fill: color(\"#fff\").toString(),\n                  fontFamily: \"Arial\",\n                }}\n              />\n            </td>\n          </tr>\n\n          <tr>\n            <td colSpan=\"2\" style={{ backgroundColor: color1, color: \"white\" }} className={waterWarningClass}>\n              {waterWarningText}\n            </td>\n          </tr>\n          <tr>\n            <td className=\"title\">蓄水百分比</td>\n            <td className=\"data\">{data[0].PercentageOfStorage} %</td>\n          </tr>\n          <tr>\n            <td className=\"title\">水位高</td>\n            <td className=\"data\">{data[0].WaterHeight} 公尺</td>\n          </tr>\n          {/* <tr>\n            <td className=\"title\">有效蓄水量</td>\n            <td className=\"data\">{data[0].EffectiveStorage} 萬立方公尺</td>\n          </tr>\n          <tr>\n            <td className=\"title\">有效容量</td>\n            <td className=\"data\">{reservoirItem.EffectiveCapacity} 萬立方公尺</td>\n          </tr>\n          <tr>\n            <td className=\"title\">總蓄水量</td>\n            <td className=\"data\">{reservoirItem.Storage} 萬立方公尺</td>\n          </tr> */}\n          <tr>\n            <td className=\"title\">流域名稱</td>\n            <td className=\"data\">{reservoirItem.BasinName}</td>\n          </tr>\n          <tr>\n            <td className=\"title\">更新時間</td>\n            <td className=\"data\">{data[0].Time}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default ReservoirDetail;\n","import React from \"react\";\nimport { useState, useEffect, useRef } from \"react\";\nimport ReservoirDetail from \"./ReservoirDetail.js\";\nimport { Animated } from \"react-animated-css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faPlus, faMinus } from \"@fortawesome/free-solid-svg-icons\";\n\nlibrary.add(faPlus, faMinus);\n\nconst ReservoirItem = ({ idx, StationName, StationNo, reservoirItem }) => {\n  //console.log(\"cityName\", cityName);\n\n  const [showResults, setShowResults] = useState([false, false]);\n\n  const show = (StationNo) => {\n    setShowResults(function (prev) {\n      console.log(\"prev\", prev);\n    });\n    const showResults = [true, true];\n    setShowResults(showResults);\n    // console.log(\"StationNo\", StationNo);\n    // console.log(\"showResults\", showResults);\n  };\n\n  const hide = (StationNo) => {\n    const showResults = [false, false];\n    setShowResults(showResults);\n    // console.log(\"StationNo\", StationNo);\n    // console.log(\"showResults\", showResults);\n  };\n\n  return (\n    <div key={StationNo} className=\"itemsOutter\">\n      <div className=\"items\" onClick={() => (showResults[0] ? hide(StationNo) : show(StationNo))}>\n        <p>\n          {idx + 1}. {StationName}\n        </p>\n        <div>{showResults[0] ? <FontAwesomeIcon icon=\"minus\" /> : <FontAwesomeIcon icon=\"plus\" />}</div>\n      </div>\n      {showResults[1] ? (\n        <Animated animationIn=\"zoomIn\" animationOut=\"zoomOut\" isVisible={true}>\n          <ReservoirDetail reservoirItem={reservoirItem} StationNo={StationNo} />\n        </Animated>\n      ) : null}\n    </div>\n  );\n};\n\nexport default ReservoirItem;\n","import ReservoirItem from \"./ReservoirItem\";\n\nconst ReservoirList = ({ ReservoirList }) => {\n  return (\n    <div className=\"cityList\">\n      {ReservoirList.map((reservoirItem, index) => {\n        const { StationNo, StationName } = reservoirItem;\n        return (\n          <ReservoirItem\n            idx={index}\n            key={StationNo}\n            StationNo={StationNo}\n            StationName={StationName}\n            reservoirItem={reservoirItem}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nexport default ReservoirList;\n","import { useState, useEffect, useRef } from \"react\";\nimport { API_GET_RESERVOIR_STATION } from \"./global/contants\";\n\nimport \"./App.css\";\nimport Header from \"./components/Header\";\nimport ReservoirList from \"./components/ReservoirList\";\n\nasync function fetchData(setData) {\n  const res = await fetch(API_GET_RESERVOIR_STATION);\n  // const { data } = await res.json();\n  const data = await res.json();\n  setData(data);\n  //console.log(\"data\", data);\n}\n\nconst App = () => {\n  const [data, setData] = useState([]);\n  const clickShowMore = useRef(false);\n\n  useEffect(() => {\n    if (!clickShowMore.current) {\n      return;\n    }\n  }, [data]);\n\n  useEffect(() => {\n    fetchData(setData);\n  }, []);\n\n  return (\n    <div className=\"container\">\n      <Header title=\"\" />\n      <ReservoirList ReservoirList={data} />\n      {/* <CityList CityList={data} /> */}\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}